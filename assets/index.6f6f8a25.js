import{p as c}from"./vendor.15fcc682.js";const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};v();const m=(t,e,o)=>{if(o<0||o>1)throw"force must be in range [0.0, 1.0]";const s=e.subtract(t);return new c.Point(t.x+o*s.x,t.y+o*s.y)},T=(t,e,o,s,n)=>(t-e)*(n-s)/(o-e)+s,S=(t,e)=>T(Math.random(),0,1,t,e),L=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t),C=(t,e)=>(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),new File([t.outerHTML],e||`export_${Date.now()}.svg`,{type:"image/svg+xml;charset=utf-8"})),O=t=>{const e=URL.createObjectURL(t),o=document.createElement("a");return o.setAttribute("href",e),o.setAttribute("download",t.name),o.innerText=t.name,o},R=t=>{const e=document.createElement("input");return e.setAttribute("type","file"),e.onchange=o=>{o.target&&o.target.files.length>0?(e.files=o.target.files,t(Array.from(o.target.files))):console.log("No files in input field"),o.preventDefault()},e},D=(t,e,o)=>{const s=[o.clone().add(new c.Point(t,-t)),o.clone().add(new c.Point(t,t)),o.clone().add(new c.Point(-t,t)),o.clone().add(new c.Point(-t,-t))],n=[];return[[s[0],s[1]],[s[1],s[2]],[s[2],s[3]],[s[3],s[0]]].map(r=>{n.push(r[0]);const a=r[1].x-r[0].x,w=r[1].y-r[0].y;for(let d=0;d<e;d++)n.push(new c.Point(r[0].x+d/e*a,r[0].y+d/e*w))}),n},b=3,N=.9,A=.5,P=.5,g=b*2,k=2,I=!1,U=t=>{var x;c.setup(t);let e=!0,o=!1;const s=new c.PointText({point:new c.Point(c.view.viewSize.width/10,c.view.viewSize.height/5+50),justification:"left",fontSize:24,visible:I}),n=new c.Path({strokeColor:"black"});n.add(...D(50,50,c.view.center)),n.closePath(),o=!0;const r=u=>{u.forEach(p=>{p.type.match("svg")&&(console.log("Trying file",p.name),p.text().then(i=>{c.project.importSVG(i,{insert:!1,onLoad:f=>{n.removeSegments(),n.add(...f.children[1].segments.map(l=>l.point)),n.closePath(),n.position=c.project.view.center,console.log(`Updating ${c.view.update()}`),o=!0}})}))})},a=document.createElement("p");a.setAttribute("style","font-family: Arial"),a.innerText="Upload a custom SVG file. The SVG has to be a closed shape with a single path.";const w=R(r),d=document.createElement("div");d.setAttribute("style",`
        border: 1px solid black; max-width: 75%;
        border-radius: 5px;
        padding: 2% 1% 1% 1%;
        `),d.appendChild(w),d.appendChild(a),(x=t.parentElement)==null||x.append(d),c.view.onFrame=u=>{if(!e||!o)return;n.segments.forEach(i=>{[i.previous,i.next].forEach(h=>{const y=m(i.point,h.point,N);i.point.x=y.x,i.point.y=y.y}),n.segments.filter(h=>h!=i).forEach(h=>{if(i.point.getDistance(h.point)<b){const E=i.point.subtract(h.point);i.point.x+=E.x*A,i.point.y+=E.y*A}});const f=m(i.previous.point,i.next.point,.5),l=m(i.point,f,P);i.point.x=l.x,i.point.y=l.y});const p=[];if(n.curves.forEach((i,f)=>{if(i.point1.getDistance(i.point2)>g&&p.every(l=>l.point.getDistance(i.point1)<g&&l.point.getDistance(i.point2)<g)){const l=i.getPointAtTime(.5);p.push({index:f+1,point:l})}}),p.forEach(i=>n.insert(i.index,i.point)),u.count%k==1){const i=L(0,n.segments.length-1),f=n.segments[i],l=m(f.point,f.next.point,S(0,1));n.insert(i,l)}s&&(s.content=`nodes: ${n.segments.length.toString()}`)},(()=>{document.addEventListener("keydown",u=>{if([" ","Spacebar"].includes(u.key)&&(e=!e),["s"].includes(u.key)){const p=C(n.exportSVG({bounds:"view"})),i=O(p);t.parentElement?t.parentElement.appendChild(i):document.body.appendChild(i)}})})()},F=(t,e)=>{const o=document.createElement("canvas");return o.width=t,o.height=e,o},M=()=>{const t=document.querySelector("#root");if(!t)throw"Unable to find root div container";t.setAttribute("style","padding: 1% 2% 0 2%;");const e=document.createElement("p");e.innerText="Differential growth",e.setAttribute("style","font-family: Arial; font-size: 18pt; font-weight: bold");const o=F(window.innerWidth,window.innerHeight*.7);o.setAttribute("style","display: block;"),t.appendChild(e),t.appendChild(o),U(o)};M();
//# sourceMappingURL=index.6f6f8a25.js.map
