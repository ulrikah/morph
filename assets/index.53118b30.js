import{p as c,S as G,M as I,V as S,a as P,C as L,T as M,W as _,P as U,b as H,c as V,d as W,D as z}from"./vendor.8bce87b3.js";const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};B();const T=(t,e,n)=>{if(n<0||n>1)throw"force must be in range [0.0, 1.0]";const s=e.subtract(t);return new c.Point(t.x+n*s.x,t.y+n*s.y)},q=(t,e,n,s,o)=>(t-e)*(o-s)/(n-e)+s,y=(t,e)=>q(Math.random(),0,1,t,e),j=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t),$=(t,e)=>(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),new File([t.outerHTML],e||`export_${Date.now()}.svg`,{type:"image/svg+xml;charset=utf-8"})),K=t=>{const e=URL.createObjectURL(t),n=document.createElement("a");return n.setAttribute("href",e),n.setAttribute("download",t.name),n.innerText=t.name,n},Q=t=>{const e=document.createElement("input");return e.setAttribute("type","file"),e.onchange=n=>{n.target&&n.target.files.length>0?(e.files=n.target.files,t(Array.from(n.target.files))):console.log("No files in input field"),n.preventDefault()},e},Y=(t,e,n)=>{const s=[n.clone().add(new c.Point(t,-t)),n.clone().add(new c.Point(t,t)),n.clone().add(new c.Point(-t,t)),n.clone().add(new c.Point(-t,-t))],o=[];return[[s[0],s[1]],[s[1],s[2]],[s[2],s[3]],[s[3],s[0]]].map(r=>{o.push(r[0]);const p=r[1].x-r[0].x,E=r[1].y-r[0].y;for(let a=0;a<e;a++)o.push(new c.Point(r[0].x+a/e*p,r[0].y+a/e*E))}),o},R=3,J=.9,C=.5,X=.5,v=R*2,Z=2,tt=!1,et=t=>{var g;c.setup(t);let e=!0,n=!1;const s=new c.PointText({point:new c.Point(c.view.viewSize.width/10,c.view.viewSize.height/5+50),justification:"left",fontSize:24,visible:tt}),o=new c.Path({strokeColor:"black"});o.add(...Y(50,50,c.view.center)),o.closePath(),n=!0;const r=f=>{f.forEach(l=>{l.type.match("svg")&&(console.log("Trying file",l.name),l.text().then(i=>{c.project.importSVG(i,{insert:!1,onLoad:h=>{o.removeSegments(),o.add(...ot(h.children[1],500)),o.closePath(),o.position=c.project.view.center,console.log(`Updating ${c.view.update()}`),n=!0}})}))})},p=document.createElement("p");p.setAttribute("style","font-family: Arial"),p.innerText="Upload a custom SVG file. The SVG has to be a closed shape with a single path.";const E=Q(r),a=document.createElement("div");a.setAttribute("style",`
        border: 1px solid black; max-width: 75%;
        border-radius: 5px;
        padding: 2% 1% 1% 1%;
        `),a.appendChild(E),a.appendChild(p),(g=t.parentElement)==null||g.append(a),c.view.onFrame=f=>{if(!e||!n)return;o.segments.forEach(i=>{[i.previous,i.next].forEach(u=>{const b=T(i.point,u.point,J);i.point.x=b.x,i.point.y=b.y}),o.segments.filter(u=>u!=i).forEach(u=>{if(i.point.getDistance(u.point)<R){const x=i.point.subtract(u.point);i.point.x+=x.x*C,i.point.y+=x.y*C}});const h=T(i.previous.point,i.next.point,.5),d=T(i.point,h,X);i.point.x=d.x,i.point.y=d.y});const l=[];if(o.curves.forEach((i,h)=>{if(i.point1.getDistance(i.point2)>v&&l.every(d=>d.point.getDistance(i.point1)<v&&d.point.getDistance(i.point2)<v)){const d=i.getPointAtTime(.5);l.push({index:h+1,point:d})}}),l.forEach(i=>o.insert(i.index,i.point)),f.count%Z==1){const i=j(0,o.segments.length-1),h=o.segments[i],d=T(h.point,h.next.point,y(0,1));o.insert(i,d)}s&&(s.content=`nodes: ${o.segments.length.toString()}`)},(()=>{document.addEventListener("keydown",f=>{if([" ","Spacebar"].includes(f.key)&&(e=!e),["s"].includes(f.key)){const l=$(o.exportSVG({bounds:"view"})),i=K(l);t.parentElement?t.parentElement.appendChild(i):document.body.appendChild(i)}})})()},nt=t=>[...Array(t).keys()],ot=(t,e)=>nt(e).map(n=>t.getPointAt(t.length/e*n)),A=(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},it=.1,st=new G(it,32,32),rt=new I({color:13508938}),ct=new I({color:2200782});class O{constructor(e=.01,n=new S(y(-2,2),y(-2,2),y(-2,2))){this.walk=()=>{this.body.position.x+=y(-this.speed,this.speed),this.body.position.y+=y(-this.speed,this.speed),this.body.position.z+=y(-this.speed,this.speed)},this.collision=s=>{const o=this.body.position.distanceTo(s.body.position),r=this.body.geometry.parameters.radius+s.body.geometry.parameters.radius+this.speed+s.speed;return o<r?!0:(this.minDistToBranch=o>this.minDistToBranch?o:this.minDistToBranch,!1)},this.setInactive=()=>(this.active=!1,this.body.material=ct,this),this.body=new P(st,rt),this.body.position.x=n.x,this.body.position.y=n.y,this.body.position.z=n.z,this.speed=e,this.active=!0,this.minDistToBranch=0}}L.install({THREE:M});const at=1e3,dt=(t=A(window.innerWidth,window.innerHeight))=>{const e=new _({canvas:t}),n=75,s=2,o=.1,r=new U(n,s,o);r.position.z=8,r.position.y=0;const p=new H,E=new L(r,e.domElement),a=new V;a.background=new W("white");const D=16777215,g=1,f=new z(D,g);f.position.set(-1,2,4),a.add(f);const l=.02,i=3,h=[new O(l,new S(0,0,0))],d=[];for(let m=0;m<at;m++)d.push(new O(l));d.map(m=>a.add(m.body));let u=!0;const b=m=>{const F=p.getDelta();E.update(F),e.render(a,r),requestAnimationFrame(b),!!u&&d.filter(w=>w.active).map(w=>{w.walk(),w.minDistToBranch<i?h.forEach(N=>{w.collision(N)&&h.push(w.setInactive())}):w.minDistToBranch-=w.speed})};(()=>{document.addEventListener("keydown",m=>{[" ","Spacebar"].includes(m.key)&&(u=!u)})})(),requestAnimationFrame(b)};var k;(function(t){t[t.DIFFUSION_LIMITED_AGGREGATION=0]="DIFFUSION_LIMITED_AGGREGATION",t[t.DIFFERENTIAL_GROWTH=1]="DIFFERENTIAL_GROWTH"})(k||(k={}));const lt=t=>{if(t===1){const e=document.querySelector("#root");if(!e)throw"Unable to find root div container";e.setAttribute("style","padding: 1% 2% 0 2%;");const n=document.createElement("p");n.innerText="Differential growth",n.setAttribute("style","font-family: Arial; font-size: 18pt; font-weight: bold");const s=A(window.innerWidth,window.innerHeight*.7);s.setAttribute("style","display: block;"),e.appendChild(n),e.appendChild(s),et(s)}else if(t===0){const e=A(window.innerWidth,window.innerHeight);document.body.appendChild(e),dt(e)}};lt(1);
//# sourceMappingURL=index.53118b30.js.map
