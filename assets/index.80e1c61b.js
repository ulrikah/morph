import{p as c,S as G,M as I,V as S,a as M,C as L,T as P,W as _,P as U,b as H,c as V,d as W,D as z}from"./vendor.8bce87b3.js";const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};B();const T=(t,e,o)=>{if(o<0||o>1)throw"force must be in range [0.0, 1.0]";const s=e.subtract(t);return new c.Point(t.x+o*s.x,t.y+o*s.y)},q=(t,e,o,s,n)=>(t-e)*(n-s)/(o-e)+s,y=(t,e)=>q(Math.random(),0,1,t,e),j=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t),$=(t,e)=>(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),new File([t.outerHTML],e||`export_${Date.now()}.svg`,{type:"image/svg+xml;charset=utf-8"})),K=t=>{const e=URL.createObjectURL(t),o=document.createElement("a");return o.setAttribute("href",e),o.setAttribute("download",t.name),o.innerText=t.name,o},Q=t=>{const e=document.createElement("input");return e.setAttribute("type","file"),e.onchange=o=>{o.target&&o.target.files.length>0?(e.files=o.target.files,t(Array.from(o.target.files))):console.log("No files in input field"),o.preventDefault()},e},Y=(t,e,o)=>{const s=[o.clone().add(new c.Point(t,-t)),o.clone().add(new c.Point(t,t)),o.clone().add(new c.Point(-t,t)),o.clone().add(new c.Point(-t,-t))],n=[];return[[s[0],s[1]],[s[1],s[2]],[s[2],s[3]],[s[3],s[0]]].map(r=>{n.push(r[0]);const p=r[1].x-r[0].x,E=r[1].y-r[0].y;for(let d=0;d<e;d++)n.push(new c.Point(r[0].x+d/e*p,r[0].y+d/e*E))}),n},R=3,J=.9,C=.5,X=.5,v=R*2,Z=2,tt=!1,et=t=>{var g;c.setup(t);let e=!0,o=!1;const s=new c.PointText({point:new c.Point(c.view.viewSize.width/10,c.view.viewSize.height/5+50),justification:"left",fontSize:24,visible:tt}),n=new c.Path({strokeColor:"black"});n.add(...Y(50,50,c.view.center)),n.closePath(),o=!0;const r=f=>{f.forEach(l=>{l.type.match("svg")&&(console.log("Trying file",l.name),l.text().then(i=>{c.project.importSVG(i,{insert:!1,onLoad:h=>{n.removeSegments(),n.add(...h.children[1].segments.map(a=>a.point)),n.closePath(),n.position=c.project.view.center,console.log(`Updating ${c.view.update()}`),o=!0}})}))})},p=document.createElement("p");p.setAttribute("style","font-family: Arial"),p.innerText="Upload a custom SVG file. The SVG has to be a closed shape with a single path.";const E=Q(r),d=document.createElement("div");d.setAttribute("style",`
        border: 1px solid black; max-width: 75%;
        border-radius: 5px;
        padding: 2% 1% 1% 1%;
        `),d.appendChild(E),d.appendChild(p),(g=t.parentElement)==null||g.append(d),c.view.onFrame=f=>{if(!e||!o)return;n.segments.forEach(i=>{[i.previous,i.next].forEach(u=>{const b=T(i.point,u.point,J);i.point.x=b.x,i.point.y=b.y}),n.segments.filter(u=>u!=i).forEach(u=>{if(i.point.getDistance(u.point)<R){const x=i.point.subtract(u.point);i.point.x+=x.x*C,i.point.y+=x.y*C}});const h=T(i.previous.point,i.next.point,.5),a=T(i.point,h,X);i.point.x=a.x,i.point.y=a.y});const l=[];if(n.curves.forEach((i,h)=>{if(i.point1.getDistance(i.point2)>v&&l.every(a=>a.point.getDistance(i.point1)<v&&a.point.getDistance(i.point2)<v)){const a=i.getPointAtTime(.5);l.push({index:h+1,point:a})}}),l.forEach(i=>n.insert(i.index,i.point)),f.count%Z==1){const i=j(0,n.segments.length-1),h=n.segments[i],a=T(h.point,h.next.point,y(0,1));n.insert(i,a)}s&&(s.content=`nodes: ${n.segments.length.toString()}`)},(()=>{document.addEventListener("keydown",f=>{if([" ","Spacebar"].includes(f.key)&&(e=!e),["s"].includes(f.key)){const l=$(n.exportSVG({bounds:"view"})),i=K(l);t.parentElement?t.parentElement.appendChild(i):document.body.appendChild(i)}})})()},D=(t,e)=>{const o=document.createElement("canvas");return o.width=t,o.height=e,o},nt=.1,ot=new G(nt,32,32),it=new I({color:13508938}),st=new I({color:2200782});class O{constructor(e=.01,o=new S(y(-2,2),y(-2,2),y(-2,2))){this.walk=()=>{this.body.position.x+=y(-this.speed,this.speed),this.body.position.y+=y(-this.speed,this.speed),this.body.position.z+=y(-this.speed,this.speed)},this.collision=s=>{const n=this.body.position.distanceTo(s.body.position),r=this.body.geometry.parameters.radius+s.body.geometry.parameters.radius+this.speed+s.speed;return n<r?!0:(this.minDistToBranch=n>this.minDistToBranch?n:this.minDistToBranch,!1)},this.setInactive=()=>(this.active=!1,this.body.material=st,this),this.body=new M(ot,it),this.body.position.x=o.x,this.body.position.y=o.y,this.body.position.z=o.z,this.speed=e,this.active=!0,this.minDistToBranch=0}}L.install({THREE:P});const rt=1e3,ct=(t=D(window.innerWidth,window.innerHeight))=>{const e=new _({canvas:t}),o=75,s=2,n=.1,r=new U(o,s,n);r.position.z=8,r.position.y=0;const p=new H,E=new L(r,e.domElement),d=new V;d.background=new W("white");const A=16777215,g=1,f=new z(A,g);f.position.set(-1,2,4),d.add(f);const l=.02,i=3,h=[new O(l,new S(0,0,0))],a=[];for(let m=0;m<rt;m++)a.push(new O(l));a.map(m=>d.add(m.body));let u=!0;const b=m=>{const N=p.getDelta();E.update(N),e.render(d,r),requestAnimationFrame(b),!!u&&a.filter(w=>w.active).map(w=>{w.walk(),w.minDistToBranch<i?h.forEach(k=>{w.collision(k)&&h.push(w.setInactive())}):w.minDistToBranch-=w.speed})};(()=>{document.addEventListener("keydown",m=>{[" ","Spacebar"].includes(m.key)&&(u=!u)})})(),requestAnimationFrame(b)};var F;(function(t){t[t.DIFFUSION_LIMITED_AGGREGATION=0]="DIFFUSION_LIMITED_AGGREGATION",t[t.DIFFERENTIAL_GROWTH=1]="DIFFERENTIAL_GROWTH"})(F||(F={}));const at=t=>{if(t===1){const e=document.querySelector("#root");if(!e)throw"Unable to find root div container";e.setAttribute("style","padding: 1% 2% 0 2%;");const o=document.createElement("p");o.innerText="Differential growth",o.setAttribute("style","font-family: Arial; font-size: 18pt; font-weight: bold");const s=D(window.innerWidth,window.innerHeight*.7);s.setAttribute("style","display: block;"),e.appendChild(o),e.appendChild(s),et(s)}else if(t===0){const e=D(window.innerWidth,window.innerHeight);document.body.appendChild(e),ct(e)}};at(1);
//# sourceMappingURL=index.80e1c61b.js.map
